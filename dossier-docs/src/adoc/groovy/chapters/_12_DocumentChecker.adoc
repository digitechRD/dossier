[[_12_DocumentChecker]]
== {DocumentChecker}

=== Description

Ce script est utilisé avant une recherche pour valider les critères.

=== Paramètres

cf. <<_01_CommonData,attributs communs>>.

[options="noheader",cols="2a,2a,3a"]
|===
|[.sub-header]
_Nom_|[.sub-header]
_Type_|[.sub-header]
_Description_
3+|[.header]
Entrées
|*_search*|ISearchModel|Recherche
|*-parameters*|Map<String, Object>|Paramètres

3+|[.header]
Entrées/sorties
|*_result*|*com.digitech.dossier.script.model.impl.result.ScriptResultValueChecker*|contient la variable *valid* qui détermine si la recherche est valide
|===

=== Exemples

.Blocage d'une recherche si une certaine condition est rencontrée.
[source,groovy]
----
boolean condition = checkIfSearchIsValid(_search)
result.setValid(condition)

private static boolean checkIfSearchIsValid(def sm) {
  //
  return ok
}
----

.Ajout d'un critère de recherche
[source,groovy]
----

if(!userCanSeeArchiveFolder(_userContext)) {
  _search.setAirsRequest(_search.getAirsRequest(_userContext)) + " ET ARCHIVE=0"
}

private static boolean userCanSeeArchiveFolder(IUserCoreContext uc) {
  // whatever...
  return uc.getProfileCodeList().contains("ARCHIVE_RIGHT")
}
----


