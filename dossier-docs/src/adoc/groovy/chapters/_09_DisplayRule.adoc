[[_09_DisplayRule]]
== {DisplayRule}

=== Description

Ce type de script est déclenché pour l'affichage des actions personnalisées.

=== Paramètres

cf. <<_01_CommonData,attributs communs>>.

[options="noheader",cols="2a,2a,3a"]
|===
|[.sub-header]
_Nom_|[.sub-header]
_Type_|[.sub-header]
_Description_
3+|[.header]
Entrées
|*_document*|*com.digitech.dossier.common.model.backend.airs.IDocument*|Document
|*_attachment*|*com.digitech.dossier.common.model.backend.airs.IAttachment*|Pièce jointe

3+|[.header]
Entrées/sorties
|*_result*|*com.digitech.dossier.script.model.impl.result.ScriptResultValueDisplayRule*|contient la variable *valid* qui détermine l'affichage de l'action
|===

=== Exemple

Affichage de l'action "Diffuser le CR à Digitech !" si le document contient des pièces jointes et que le champ _Thématique_ contient la valeur _Réunion
transverse_.

[source, groovy]
----
import com.digitech.dossier.common.model.backend.airs.IDocument
import com.digitech.dossier.common.service.IAuthorityList
import com.digitech.dossier.common.service.ServiceManager
import com.digitech.jcorbairs.Term

Term updatedFieldCode = getAuthorityListService().getTerm((Integer) document.getField("CR_THEME").getValue())
_result.setValid(_document?.getAttachments(_userContext)?.size > 0 && updatedFieldCode?.getCode() == "TH_TRANS")

/**
 * @return IAuthorityList the Authority List
 */
public static IAuthorityList getAuthorityListService() {
  return (IAuthorityList) ServiceManager.getInstance().getService(com.digitech.dossier.common.service.Constants.SERVICE_AIRS_AUTHORITYLIST_MGR
}
----

.Exemple d'affichage de l'action
image:examples/display_rule_example_displayed.png[]

.Exemple où l'action est masquée
image:examples/display_rule_example_hidden.png[]