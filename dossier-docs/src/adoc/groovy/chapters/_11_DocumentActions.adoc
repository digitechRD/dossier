[[_11_DocumentActions]]
== {DocumentActions}

=== Description

Ce script est utilisé lors de la récupération des actions pour un document.

=== Paramètres

cf. <<_01_CommonData,attributs communs>>.

[options="noheader",cols="2a,2a,3a"]
|===
|[.sub-header]
_Nom_|[.sub-header]
_Type_|[.sub-header]
_Description_
3+|[.header]
Entrées
|*_fieldValueMap*|Map<String, IFieldValue>|Liste des champs

3+|[.header]
Entrées/sorties
|*_result*|*com.digitech.dossier.script.model.impl.result.ScriptResultValueDocumentActions*|contient les variables *allActions* (toutes les actions) et
*unavailableActions* (actions indisponibles)
|===

=== Exemple

Ajout de l'interdiction d'effectuer l'action *Verrouiller* pour un utilisateur n'ayant pas le profil _DOC_ADMIN_CLIENT_.

[source, groovy]
----
import com.digitech.dossier.common.model.backend.airs.IFieldValue
import com.digitech.dossier.common.utils.UserUtils
import com.digitech.dossier.script.model.impl.result.ScriptResultModel
import com.digitech.dossier.script.model.impl.result.ScriptResultValueDocumentActions

List<ScriptResultValueDocumentActions.Action> unavailableActions = new ArrayList<ScriptResultValueDocumentActions.Action>()
if(!UserUtils.hasProfile(_userContext, "DOS_ADMIN_CLIENT")) {
  unavailableActions.add(ScriptResultValueDocumentActions.Action.LOCK)
}
_result.getUnavailableActions().addAll(unavailableActions)
----

.Exemple de résultats de recherche pour un utilisateur n'ayant pas le droit de verrouiller les documents
image:examples/document_actions_example.png[]


